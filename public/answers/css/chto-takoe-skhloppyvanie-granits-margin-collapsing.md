# Что такое схлопывание границ (margin collapsing)?

Схлопывание margin (margin collapsing) — это поведение CSS, при котором вертикальные margin соседних элементов объединяются (схлопываются) в один margin, равный большему из двух значений.

## Что такое margin collapsing?

Когда два элемента с вертикальными margin находятся рядом друг с другом, их margin не складываются, а схлопываются — остается только больший margin.

## Как работает схлопывание

### Пример:

```css
.box1 {
    margin-bottom: 20px;
}

.box2 {
    margin-top: 30px;
}
```

**Результат:**
- Ожидание: 20px + 30px = 50px отступа
- Реальность: max(20px, 30px) = 30px отступа

## Когда происходит схлопывание

### 1. **Соседние элементы**

```html
<div class="box1">Блок 1</div>
<div class="box2">Блок 2</div>
```

### 2. **Родитель и первый/последний дочерний элемент**

```html
<div class="parent">
    <div class="child">Ребенок</div>
</div>
```

Если у родителя и ребенка есть margin, они могут схлопываться.

## Когда НЕ происходит схлопывание

### 1. **Горизонтальные margin**

Горизонтальные margin никогда не схлопываются.

### 2. **Flexbox и Grid**

Элементы в flexbox и grid контейнерах не схлопываются.

### 3. **Позиционированные элементы**

Элементы с `position: absolute` или `fixed` не схлопываются.

### 4. **Плавающие элементы**

Элементы с `float` не схлопываются.

## Примеры

### Схлопывание соседних элементов:

```html
<div style="margin-bottom: 20px;">Блок 1</div>
<div style="margin-top: 30px;">Блок 2</div>
```

**Отступ между блоками:** 30px (не 50px)

### Схлопывание родителя и ребенка:

```html
<div style="margin-top: 20px;">
    <div style="margin-top: 30px;">Ребенок</div>
</div>
```

**Отступ сверху:** 30px (не 50px)

## Как предотвратить схлопывание

### 1. **Padding вместо margin**

```css
.parent {
    padding-top: 20px; /* Не схлопывается */
}
```

### 2. **Border**

```css
.parent {
    border-top: 1px solid transparent; /* Предотвращает схлопывание */
}
```

### 3. **Flexbox/Grid**

```css
.parent {
    display: flex; /* Предотвращает схлопывание */
}
```

### 4. **Overflow**

```css
.parent {
    overflow: auto; /* Предотвращает схлопывание */
}
```

## Заключение

**Margin collapsing:**

- ✅ Происходит для вертикальных margin
- ✅ Объединяет margin в больший
- ✅ Не происходит для горизонтальных margin
- ✅ Не происходит в flexbox/grid

**Когда происходит:**
- Соседние элементы
- Родитель и первый/последний ребенок

**Как предотвратить:**
- Использовать padding
- Добавить border
- Использовать flexbox/grid
- Использовать overflow

Понимание margin collapsing важно для правильного контроля отступов в CSS.

