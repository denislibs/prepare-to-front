# Что такое `z-index`? Как формируется контекст наложения?

`z-index` — это CSS-свойство, которое определяет порядок наложения элементов по оси Z (глубина). Контекст наложения (stacking context) — это концепция, которая определяет, как элементы накладываются друг на друга.

## Что такое `z-index`?

`z-index` — это свойство, которое контролирует порядок наложения элементов. Элементы с большим `z-index` отображаются поверх элементов с меньшим `z-index`.

## Использование

### Базовый синтаксис:

```css
.element {
    z-index: 1;
}
```

### Значения:

- `auto` — автоматически (по умолчанию)
- Число — положительное или отрицательное
- `inherit` — наследует от родителя

## Контекст наложения

### Что такое контекст наложения?

Контекст наложения — это трехмерная концепция, которая определяет, как элементы накладываются друг на друга. Каждый контекст наложения изолирован от других.

### Как формируется контекст наложения?

Контекст наложения создается когда:

1. **Корневой элемент** (`<html>`)
2. **Элемент с `position` и `z-index`** (не `auto`)
3. **Элемент с `opacity` меньше 1**
4. **Элемент с `transform`** (не `none`)
5. **Элемент с `filter`** (не `none`)
6. **Элемент с `will-change`** (определенные значения)
7. **Элемент с `isolation: isolate`**

## Примеры использования

### Базовое наложение:

```css
.element-1 {
    position: relative;
    z-index: 1;
}

.element-2 {
    position: relative;
    z-index: 2; /* Поверх element-1 */
}
```

### Модальное окно:

```css
.modal {
    position: fixed;
    z-index: 1000;
    background-color: rgba(0, 0, 0, 0.5);
}

.modal-content {
    position: relative;
    z-index: 1001; /* Поверх фона */
}
```

### Выпадающее меню:

```css
.dropdown {
    position: relative;
    z-index: 10;
}

.dropdown-menu {
    position: absolute;
    z-index: 11; /* Поверх dropdown */
}
```

## Изоляция контекстов

### Проблема:

```css
.parent {
    position: relative;
    z-index: 1;
}

.child {
    position: relative;
    z-index: 100; /* Не работает, так как в контексте parent */
}
```

### Решение:

```css
.parent {
    position: relative;
    z-index: 1;
    isolation: isolate; /* Создает новый контекст */
}

.child {
    position: relative;
    z-index: 100; /* Теперь работает */
}
```

## Порядок наложения

### Внутри контекста наложения:

1. Элементы с отрицательным `z-index`
2. Элементы с `position: static` и без `z-index`
3. Элементы с `position` и `z-index: auto`
4. Элементы с положительным `z-index`

### Между контекстами:

Контексты наложения сравниваются по их родительскому контексту.

## Заключение

**`z-index` — это:**

1. ✅ Свойство для контроля порядка наложения
2. ✅ Работает только с позиционированными элементами
3. ✅ Определяет глубину элементов

**Контекст наложения:**

- Трехмерная концепция наложения
- Создается определенными свойствами
- Изолирует элементы друг от друга

**Рекомендации:**

- Используйте осознанно
- Понимайте контексты наложения
- Избегайте очень больших значений
- Используйте `isolation: isolate` для изоляции

Правильное понимание `z-index` и контекстов наложения критично для создания сложных макетов.
