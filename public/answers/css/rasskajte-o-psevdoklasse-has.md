# Расскажите о псевдоклассе `:has()`?

Псевдокласс `:has()` в CSS — это "родительский селектор", который позволяет выбрать элемент на основе его потомков. Это мощный инструмент для стилизации элементов в зависимости от их содержимого.

## Что такое `:has()`?

`:has()` — это функциональный псевдокласс, который выбирает элемент, если он содержит потомка, соответствующий селектору в скобках.

## Базовое использование

### Синтаксис:

```css
родитель:has(потомок) {
    /* Стили */
}
```

### Пример:

```css
/* Выбрать div, который содержит параграф */
div:has(p) {
    background-color: yellow;
}
```

## Примеры использования

### Стилизация родителя по дочернему элементу:

```css
/* Выбрать карточку, содержащую изображение */
.card:has(img) {
    border: 2px solid blue;
}

/* Выбрать форму, содержащую невалидное поле */
form:has(input:invalid) {
    border-color: red;
}
```

### Условная стилизация:

```css
/* Выбрать список, содержащий более 5 элементов */
ul:has(li:nth-child(6)) {
    column-count: 2;
}

/* Выбрать контейнер, содержащий пустой элемент */
.container:has(.empty) {
    display: none;
}
```

### Стилизация по состоянию дочерних элементов:

```css
/* Выбрать родителя, если дочерний элемент в фокусе */
.field-group:has(input:focus) {
    background-color: #f0f0f0;
}

/* Выбрать родителя, если дочерний элемент отмечен */
.checkbox-group:has(input:checked) {
    border-color: green;
}
```

## Практические примеры

### Адаптивная карточка:

```html
<div class="card">
    <img src="image.jpg" alt="Image">
    <h2>Заголовок</h2>
    <p>Текст</p>
</div>
```

```css
/* Если карточка содержит изображение, изменить layout */
.card:has(img) {
    display: flex;
    flex-direction: column;
}

.card:has(img) h2 {
    margin-top: 1rem;
}
```

### Валидация формы:

```html
<form>
    <div class="field-group">
        <input type="email" required>
    </div>
</form>
```

```css
/* Подсветить группу полей с невалидным input */
.field-group:has(input:invalid) {
    border: 2px solid red;
}

/* Подсветить группу полей с валидным input */
.field-group:has(input:valid) {
    border: 2px solid green;
}
```

### Условное отображение:

```css
/* Скрыть контейнер, если он содержит пустой список */
.container:has(ul:empty) {
    display: none;
}

/* Показать сообщение, если форма содержит ошибки */
.message:has(.error) {
    display: block;
    color: red;
}
```

## Комбинирование с другими селекторами

### С псевдоклассами:

```css
/* Выбрать элемент, если он содержит hover-элемент */
.parent:has(.child:hover) {
    background-color: yellow;
}
```

### С атрибутами:

```css
/* Выбрать форму, содержащую disabled input */
form:has(input[disabled]) {
    opacity: 0.5;
}
```

## Ограничения

### Производительность:

`:has()` может быть медленнее других селекторов, так как браузер должен проверять всех потомков.

### Поддержка браузеров:

- ✅ Chrome 105+
- ✅ Edge 105+
- ✅ Safari 15.4+
- ❌ Firefox (в разработке)

## Альтернативы

### JavaScript:

```javascript
const parent = document.querySelector('.parent');
if (parent.querySelector('.child')) {
    parent.classList.add('has-child');
}
```

### CSS переменные:

```css
.child {
    --has-child: 1;
}

.parent {
    /* Использовать переменную */
}
```

## Заключение

**`:has()` позволяет:**

1. ✅ Выбирать элементы по их потомкам
2. ✅ Создавать условную стилизацию
3. ✅ Упрощать сложные селекторы
4. ✅ Стилизовать родителя по состоянию дочерних элементов

**Использование:**

- Стилизация родителя по дочернему элементу
- Условная стилизация
- Валидация форм
- Адаптивный дизайн

**Ограничения:**

- Производительность
- Поддержка браузеров (Firefox в разработке)

**Рекомендации:**

- Используйте для условной стилизации
- Тестируйте производительность
- Предоставляйте fallback для старых браузеров

`:has()` — мощный инструмент для создания гибких и условных стилей.

