# Что такое "Server push"? Как он улучшает производительность страниц?

Server Push (HTTP/2 Server Push) — это функция HTTP/2, которая позволяет серверу отправлять ресурсы клиенту до того, как клиент их запросит. Это улучшает производительность загрузки страниц.

## Что такое Server Push?

Server Push — это механизм HTTP/2, при котором сервер может отправлять ресурсы (CSS, JavaScript, изображения) клиенту до того, как клиент их запросит, основываясь на анализе HTML-документа.

## Как это работает

### Без Server Push:

```
1. Клиент запрашивает HTML
2. Сервер отправляет HTML
3. Клиент парсит HTML
4. Клиент запрашивает CSS
5. Сервер отправляет CSS
6. Клиент запрашивает JS
7. Сервер отправляет JS
```

### С Server Push:

```
1. Клиент запрашивает HTML
2. Сервер отправляет HTML + CSS + JS (push)
3. Клиент получает все ресурсы сразу
```

## Преимущества

### 1. **Снижение задержек**

Меньше round-trip запросов.

### 2. **Быстрая загрузка**

Ресурсы доступны сразу.

### 3. **Лучший UX**

Страница загружается быстрее.

## Примеры

### Nginx:

```nginx
location / {
    http2_push /styles.css;
    http2_push /app.js;
}
```

### Node.js:

```javascript
const http2 = require('http2');

const server = http2.createServer((req, res) => {
    if (req.url === '/') {
        res.pushStream('/styles.css', (err, pushStream) => {
            pushStream.respondWithFile('./styles.css');
        });
        res.pushStream('/app.js', (err, pushStream) => {
            pushStream.respondWithFile('./app.js');
        });
        res.end(html);
    }
});
```

## Ограничения

### 1. **Кэширование**

Клиент может уже иметь ресурсы в кэше.

### 2. **Избыточность**

Может отправлять ненужные ресурсы.

### 3. **Сложность**

Сложнее настраивать и отлаживать.

## Альтернативы

### Preload:

```html
<link rel="preload" href="styles.css" as="style">
<link rel="preload" href="app.js" as="script">
```

### Prefetch:

```html
<link rel="prefetch" href="next-page.html">
```

## Заключение

**Server Push — это:**

1. ✅ Отправка ресурсов до запроса
2. ✅ Функция HTTP/2
3. ✅ Улучшение производительности

**Преимущества:**

- Снижение задержек
- Быстрая загрузка
- Лучший UX

**Ограничения:**

- Кэширование
- Избыточность
- Сложность

**Рекомендации:**

- Используйте для критических ресурсов
- Учитывайте кэширование
- Рассмотрите альтернативы (preload)

Server Push — мощный инструмент для оптимизации производительности.

