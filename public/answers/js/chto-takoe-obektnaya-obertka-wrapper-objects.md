# Что такое объектная обертка (Wrapper Objects)?

Объектные обертки (Wrapper Objects) — это объекты, которые создаются автоматически JavaScript при обращении к примитивным значениям как к объектам. Понимание объектных оберток критически важно для понимания того, как JavaScript работает с примитивами и почему у примитивов есть методы, несмотря на то, что они не являются объектами.

## Что такое объектные обертки?

Объектные обертки — это временные объекты, которые создаются автоматически, когда вы пытаетесь обратиться к примитивному значению как к объекту (например, вызвать метод или получить свойство).

### Характеристики:

- ✅ **Создаются автоматически** — при обращении к примитиву как к объекту
- ✅ **Временные** — существуют только на время операции
- ✅ **Не сохраняются** — после операции объект удаляется
- ✅ **Прозрачные** — работают незаметно для разработчика

## Типы объектных оберток

### 1. **String**

```javascript
const str = "Hello"; // Примитив

// Автоматически создается String объект
str.toUpperCase(); // "HELLO"
str.length; // 5
str.charAt(0); // "H"

// Но str остается примитивом
typeof str; // "string"
```

### 2. **Number**

```javascript
const num = 42; // Примитив

// Автоматически создается Number объект
num.toFixed(2); // "42.00"
num.toString(); // "42"
num.toExponential(); // "4.2e+1"

// Но num остается примитивом
typeof num; // "number"
```

### 3. **Boolean**

```javascript
const bool = true; // Примитив

// Автоматически создается Boolean объект
bool.toString(); // "true"
bool.valueOf(); // true

// Но bool остается примитивом
typeof bool; // "boolean"
```

## Как работают объектные обертки?

### Механизм работы:

1. **Обращение к примитиву** — как к объекту
2. **Создание обертки** — автоматически создается объект-обертка
3. **Выполнение операции** — метод вызывается на объекте-обертке
4. **Удаление обертки** — объект удаляется после операции

```javascript
const str = "text";

// Когда вызываем str.toUpperCase():
// 1. JavaScript создает: new String("text")
// 2. Вызывает: new String("text").toUpperCase()
// 3. Возвращает результат: "TEXT"
// 4. Удаляет временный объект

str.toUpperCase(); // "TEXT"
// str все еще примитив "text"
```

## Разница между примитивами и объектами-обертками

### Примитивы:

```javascript
const str1 = "text";
const num1 = 42;
const bool1 = true;

console.log(typeof str1); // "string"
console.log(typeof num1); // "number"
console.log(typeof bool1); // "boolean"
```

### Объекты-обертки:

```javascript
const str2 = new String("text");
const num2 = new Number(42);
const bool2 = new Boolean(true);

console.log(typeof str2); // "object"
console.log(typeof num2); // "object"
console.log(typeof bool2); // "object"
```

### Сравнение:

```javascript
const str1 = "text"; // Примитив
const str2 = new String("text"); // Объект

console.log(str1 === str2); // false (разные типы)
console.log(str1 == str2); // true (приведение типов)

// Но значения одинаковые
console.log(str1.valueOf() === str2.valueOf()); // true
```

## Практические примеры

### Пример 1: Автоматическое создание оберток

```javascript
const str = "Hello";

// JavaScript автоматически создает String объект
console.log(str.length); // 5
console.log(str.toUpperCase()); // "HELLO"

// Но str остается примитивом
console.log(typeof str); // "string"
```

### Пример 2: Явное создание объектов-оберток

```javascript
// Явное создание (не рекомендуется)
const strObj = new String("text");
const numObj = new Number(42);
const boolObj = new Boolean(true);

console.log(typeof strObj); // "object"
console.log(strObj instanceof String); // true
```

### Пример 3: Проблемы с объектами-обертками

```javascript
// ❌ Проблема - объекты всегда truthy
const boolObj = new Boolean(false);
if (boolObj) {
  console.log("Выполнится!"); // Выполнится (объект - truthy)
}

// ✅ Правильно - используйте примитивы
const bool = false;
if (bool) {
  console.log("Не выполнится");
}
```

### Пример 4: Сравнение

```javascript
const str1 = "text";
const str2 = "text";
const str3 = new String("text");
const str4 = new String("text");

console.log(str1 === str2); // true (примитивы)
console.log(str3 === str4); // false (разные объекты)
console.log(str1 === str3); // false (разные типы)
```

## Когда создаются обертки?

### Автоматически:

```javascript
// При доступе к свойству
"text".length; // Создается String объект

// При вызове метода
"text".toUpperCase(); // Создается String объект

// При использовании оператора []
"text"[0]; // Создается String объект
```

### Не создаются:

```javascript
// При присваивании
const str = "text"; // Нет обертки

// При сравнении
"text" === "text"; // Нет обертки

// При арифметических операциях
"5" * 2; // Нет обертки (преобразование типа)
```

## Преобразование между примитивами и объектами

### Примитив → Объект:

```javascript
const str = "text";
const strObj = new String(str); // Явное создание
// Или автоматически при обращении к методу
```

### Объект → Примитив:

```javascript
const strObj = new String("text");
const str = strObj.valueOf(); // "text" (примитив)
// Или автоматически при операциях
const result = strObj + ""; // "text" (автоматическое преобразование)
```

## Лучшие практики

### ✅ Делайте:

1. **Используйте примитивы** — вместо объектов-оберток
2. **Полагайтесь на автоматические обертки** — они работают прозрачно
3. **Используйте valueOf()** — для преобразования объекта в примитив
4. **Понимайте разницу** — между примитивами и объектами

### ❌ Не делайте:

1. **Не создавайте объекты-обертки явно** — используйте примитивы
2. **Не сравнивайте объекты-обертки** — через === (сравнивайте примитивы)
3. **Не используйте в условиях** — объекты всегда truthy
4. **Не храните в объектах-обертках** — используйте примитивы

## Заключение

Объектные обертки:

- **Автоматическое создание** — при обращении к примитиву как к объекту
- **Временные объекты** — существуют только на время операции
- **Прозрачная работа** — позволяют использовать методы на примитивах
- **Не создавайте явно** — используйте примитивы

**Помните:** объектные обертки — это механизм JavaScript, который позволяет использовать методы на примитивных значениях. Они создаются автоматически и работают прозрачно. Не создавайте объекты-обертки явно (через `new String()`, `new Number()`, `new Boolean()`), используйте примитивы — они более эффективны и предсказуемы.

