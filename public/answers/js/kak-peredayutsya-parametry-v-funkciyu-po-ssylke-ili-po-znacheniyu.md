# Как передаются параметры в функцию: по ссылке или по значению?

Передача параметров в функции — это фундаментальная концепция программирования. В JavaScript передача параметров работает особым образом: примитивы передаются по значению, а объекты передаются по ссылке (хотя технически всегда передается значение ссылки). Понимание этого механизма критически важно для правильной работы с функциями и избежания неожиданных мутаций.

## Передача примитивов (по значению)

Примитивные типы (number, string, boolean, null, undefined, symbol, bigint) передаются по значению. Это означает, что создается копия значения, и изменения параметра внутри функции не влияют на оригинальную переменную.

### Примеры:

```javascript
function changeValue(x) {
  x = 10; // Изменяется только локальная копия
  console.log(x); // 10
}

let num = 5;
changeValue(num);
console.log(num); // 5 (не изменился)

// Строки
function changeString(str) {
  str = "new value";
  console.log(str); // "new value"
}

let text = "original";
changeString(text);
console.log(text); // "original" (не изменился)
```

## Передача объектов (по ссылке)

Объекты (включая массивы и функции) передаются по ссылке. Это означает, что передается ссылка на объект, и изменения свойств объекта внутри функции влияют на оригинальный объект.

### Примеры:

```javascript
function changeObject(obj) {
  obj.name = "Jane"; // Изменяется оригинальный объект
  obj.age = 25;
}

const person = { name: "John", age: 30 };
changeObject(person);
console.log(person); // { name: "Jane", age: 25 } (изменился!)

// Массивы
function changeArray(arr) {
  arr.push(4); // Изменяется оригинальный массив
  arr[0] = 10;
}

const numbers = [1, 2, 3];
changeArray(numbers);
console.log(numbers); // [10, 2, 3, 4] (изменился!)
```

## Важное уточнение

Технически в JavaScript всегда передается значение. Для объектов передается значение ссылки, а не сама ссылка. Это означает:

- ✅ **Можно изменять свойства** — объекта внутри функции
- ❌ **Нельзя переназначать ссылку** — на другой объект внутри функции

### Пример:

```javascript
function reassignObject(obj) {
  obj = { name: "New" }; // Переназначение не влияет на оригинал
  console.log(obj); // { name: "New" }
}

const person = { name: "John" };
reassignObject(person);
console.log(person); // { name: "John" } (не изменился!)

// Но изменение свойств работает
function modifyObject(obj) {
  obj.name = "Jane"; // Изменение свойства влияет на оригинал
}

modifyObject(person);
console.log(person); // { name: "Jane" } (изменился!)
```

## Практические примеры

### Пример 1: Примитивы

```javascript
function increment(num) {
  num++; // Изменяется только локальная копия
  return num;
}

let value = 5;
const result = increment(value);
console.log(value); // 5 (не изменился)
console.log(result); // 6
```

### Пример 2: Объекты

```javascript
function updateUser(user) {
  user.name = "Updated";
  user.lastLogin = new Date();
}

const user = { name: "John", email: "john@example.com" };
updateUser(user);
console.log(user); // { name: "Updated", lastLogin: Date, ... }
```

### Пример 3: Массивы

```javascript
function addItem(arr, item) {
  arr.push(item); // Изменяется оригинальный массив
}

const items = [1, 2, 3];
addItem(items, 4);
console.log(items); // [1, 2, 3, 4] (изменился!)
```

### Пример 4: Избежание мутации

```javascript
// ❌ Мутирует оригинал
function addItem(arr, item) {
  arr.push(item);
}

// ✅ Не мутирует оригинал
function addItem(arr, item) {
  return [...arr, item]; // Возвращает новый массив
}

const items = [1, 2, 3];
const newItems = addItem(items, 4);
console.log(items); // [1, 2, 3] (не изменился)
console.log(newItems); // [1, 2, 3, 4]
```

## Сравнительная таблица

| Тип | Передача | Изменение параметра | Изменение свойств объекта |
|-----|----------|---------------------|---------------------------|
| **Примитивы** | По значению | ❌ Не влияет | N/A |
| **Объекты** | По ссылке | ❌ Не влияет | ✅ Влияет |
| **Массивы** | По ссылке | ❌ Не влияет | ✅ Влияет |

## Лучшие практики

### ✅ Делайте:

1. **Понимайте разницу** — между примитивами и объектами
2. **Создавайте копии** — если нужно избежать мутации
3. **Документируйте** — функции, которые мутируют объекты
4. **Используйте spread оператор** — для создания копий

### ❌ Не делайте:

1. **Не мутируйте объекты** — без необходимости
2. **Не полагайтесь на мутацию** — создавайте новые объекты
3. **Не забывайте про копии** — для вложенных объектов
4. **Не смешивайте стили** — будьте последовательны

## Заключение

Передача параметров в JavaScript:

- **Примитивы** — передаются по значению (копия)
- **Объекты** — передаются по ссылке (значение ссылки)
- **Изменение свойств** — влияет на оригинальный объект
- **Переназначение** — не влияет на оригинальную ссылку

**Помните:** примитивы передаются по значению, а объекты по ссылке. Это означает, что изменения свойств объектов внутри функции влияют на оригинальные объекты. Всегда создавайте копии объектов, если нужно избежать мутации, и документируйте функции, которые изменяют переданные объекты.

